@model PhuKienShop.Data.User
@using PhuKienShop.Data

@{
    var userMessages = ViewData["UserMessages"] as IEnumerable<Message>;
}

<h4>Chat with @Model.Username</h4>

<div id="chat-window" style="height: 400px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
    @foreach (var message in userMessages)
    {
        <div class="message @((message.SenderId == Model.UserId) ? "received" : "sent")">
            <strong>@message.Sender.Username:</strong>
            <p>@message.Content</p>
            <small>@message.SentAt</small>
        </div>
    }
</div>

<form asp-action="Reply" method="post">
    <input type="hidden" name="userId" value="@Model.UserId" />
    <div class="input-group">
        <input type="text" name="messageContent" class="form-control" placeholder="Type your message..." required />
        <div class="input-group-append">
            <button class="btn btn-primary" type="submit">Send</button>
        </div>
    </div>
</form>

<style>
    .message {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 5px;
    }

        .message.sent {
            background-color: #e2f0d9;
            text-align: right;
        }

        .message.received {
            background-color: #f1f1f1;
        }
</style>
