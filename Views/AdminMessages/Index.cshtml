@model AdminMessagesViewModel
@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
<div id="chat">
    <div class="row">
        <div class="col-md-4">
            <h4> Tin Nhắn</h4>

            <ul class="list-group">
                @if (Model.UserList != null && Model.UserList.Any())
                {
                    <ul class="list-group">
                        @foreach (var user in Model.UserList)
                        {
                            <li class="list-group-item @((Model.SelectedUser != null && Model.SelectedUser.UserId == user.UserId) ? "active-user" : "")">
                                <a href="@Url.Action("Index", new { userId = user.UserId })" class="user-link">
                                    @user.Username
                                </a>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p>Không có user nào để hiển thị.</p>
                }
            </ul>
        </div>

        <div class="col-md-8">
            @if (Model.SelectedUser != null)
            {
                <h4>Chat with @Model.SelectedUser.Username</h4>

                <div class="chat-history" style="border: 1px solid #ccc; padding: 10px; height: 400px; overflow-y: auto;">
                    @await Html.PartialAsync("_MessagesPartial", Model.Messages)
                </div>

                <form asp-action="Reply" asp-route-userId="@Model.SelectedUser.UserId" method="post" id="chat-form">
                    <textarea id="messageContent" name="messageContent" placeholder="Type your message..." class="form-control" style="margin-top: 10px;"></textarea>
                    <button type="submit" class="btn btn-primary" style="margin-top: 10px;">Send</button>
                </form>
            }
            else
            {
                <p>Select a user to start the chat.</p>
            }
        </div>
    </div>
</div>
<style>
/*     #chat {
        margin: 20px 50px;
        padding: 50px;
    } */

    .admin-message .message-content {
        background-color: #d1e7dd;
        text-align: right;
    }

    .user-message .message-content {
        background-color: #f8d7da;
        text-align: left;
    }

    .active-user {
        background-color: #0d6efd;
        color: white;
    }

    .message {
        margin-bottom: 10px;
        display: flex;
    }

    .admin-message {
        justify-content: flex-end;
    }

    .user-message {
        justify-content: flex-start;
    }

    .chat-history {
        padding: 10px;
        height: 400px;
        overflow-y: auto;
        border: 1px solid #ccc;
    }
</style>

